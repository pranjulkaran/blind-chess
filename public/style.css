:root {
    --tile: 65px;
    --bg-dark: #262421;
    --sidebar-bg: #1f1e1b;
    --border: #312e2b;
    --white-theme: #81b64c;
    --black-theme: #fa4141;
    --yellow: #facc15;
    --red: #ef4444;
}

body {
    background-color: var(--bg-dark);
    color: #bababa;
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    display: flex;
    justify-content: center;
    padding-top: 50px;
}

#main-layout { display: flex; gap: 20px; }

/* Board Geometry */
#board-wrapper { position: relative; padding: 25px; background: var(--sidebar-bg); border-radius: 4px; }
#board { display: grid; grid-template-columns: repeat(8, var(--tile)); grid-template-rows: repeat(8, var(--tile)); border: 2px solid #000; }

.tile { width: var(--tile); height: var(--tile); display: flex; align-items: center; justify-content: center; opacity: 0.1; transition: opacity 0.2s; position: relative; }
.tile.light { background: #ebecd0; }
.tile.dark { background: #779556; }

/* Tactical States */
.tile.visible, .tile.revealed, .tile.selected { opacity: 1; }
.tile.selected { box-shadow: inset 0 0 0 4px var(--yellow); }

/* Valid Move: Yellow Dot */
.tile.valid-move::after { content: ''; width: 14px; height: 14px; background: var(--yellow); border-radius: 50%; box-shadow: 0 0 8px var(--yellow); }

/* Capture Reveal: Solid Red Tile */
.tile.valid-move.has-piece { background-color: var(--red) !important; opacity: 1; animation: pulse 1s infinite; }
.tile.valid-move.has-piece::after { background: white; width: 18px; height: 18px; }

@keyframes pulse { 50% { filter: brightness(1.2); } }

.piece { width: 90%; height: 90%; background-size: contain; background-repeat: no-repeat; z-index: 5; }

/* Coordinates */
.ranks, .files { position: absolute; color: #7d7a77; font-size: 0.75rem; font-weight: bold; }
.ranks { left: 8px; top: 25px; height: calc(var(--tile) * 8); display: flex; flex-direction: column; justify-content: space-around; }
.files { bottom: 4px; left: 25px; width: calc(var(--tile) * 8); display: flex; justify-content: space-around; }

/* Sidebar History */
#sidebar { width: 300px; background: var(--sidebar-bg); border-radius: 4px; display: flex; flex-direction: column; }
#notation-grid { display: grid; grid-template-columns: 40px 1fr 1fr; font-size: 0.9rem; max-height: 500px; overflow-y: auto; }
.grid-header { padding: 10px; color: #7d7a77; border-bottom: 1px solid var(--border); font-weight: bold; }
.move-num { padding: 10px; background: #2b2925; color: #7d7a77; text-align: center; border-bottom: 1px solid var(--border); }
.move-cell { padding: 10px; border-bottom: 1px solid var(--border); color: #fff; }

/* Privacy Logic */
.private { display: none; }
.mask { color: #555; font-style: italic; }

body[data-turn="white"] .white-private { display: inline; }
body[data-turn="white"] .white-mask { display: none; }
body[data-turn="black"] .black-private { display: inline; }
body[data-turn="black"] .black-mask { display: none; }

#reset-btn { margin: 15px; padding: 12px; background: #312e2b; color: white; border: none; cursor: pointer; border-radius: 4px; }