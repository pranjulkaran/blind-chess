:root {
    --tile: 65px;
    --bg-dark: #1a1917;
    --sidebar-bg: #262421;
    --border-color: #312e2b;
    --neon-blue: #00d2ff;
    --neon-red: #ff003c;
    --yellow: #facc15;
}

body {
    background-color: var(--bg-dark);
    color: #bababa;
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    display: flex;
    justify-content: center;
    padding-top: 50px;
}

#main-layout { display: flex; gap: 20px; }

/* Board Geometry */
#board-wrapper { position: relative; padding: 25px; background: var(--sidebar-bg); border-radius: 4px; border: 1px solid var(--border-color); }
#board { display: grid; grid-template-columns: repeat(8, var(--tile)); grid-template-rows: repeat(8, var(--tile)); border: 2px solid #000; }

.tile { width: var(--tile); height: var(--tile); display: flex; align-items: center; justify-content: center; opacity: 0.1; position: relative; box-sizing: border-box; transition: opacity 0.2s; }
.tile.light { background: #ebecd0; }
.tile.dark { background: #779556; }

/* VISIBILITY: Fog of War */
.tile.visible, .tile.revealed, .tile.selected, .tile.valid-move { opacity: 1; }

/* SELECTED PIECE: Neon Blue Glow */
.tile.selected .piece { filter: drop-shadow(0 0 15px var(--neon-blue)) brightness(1.3); }
.tile.selected { box-shadow: inset 0 0 0 5px var(--neon-blue); z-index: 10; }

/* VALID MOVE (EMPTY): Yellow Border */
.tile.valid-move { border: 4px solid var(--yellow); }

/* CAPTURABLE PIECE: Neon Red Glow (No full tile red) */
.tile.valid-move.has-piece { border: 4px solid var(--neon-red); }
.tile.valid-move.has-piece .piece { 
    filter: drop-shadow(0 0 15px var(--neon-red)) contrast(1.5); 
    animation: neon-pulse 1.2s infinite alternate;
}

@keyframes neon-pulse {
    from { filter: drop-shadow(0 0 8px var(--neon-red)) brightness(1); }
    to { filter: drop-shadow(0 0 20px var(--neon-red)) brightness(1.5); }
}

.piece { width: 90%; height: 90%; background-size: contain; background-repeat: no-repeat; z-index: 5; }

/* Coordinates */
.ranks, .files { position: absolute; color: #7d7a77; font-size: 0.75rem; font-weight: bold; pointer-events: none; }
.ranks { left: 8px; top: 25px; height: calc(var(--tile) * 8); display: flex; flex-direction: column; justify-content: space-around; }
.files { bottom: 4px; left: 25px; width: calc(var(--tile) * 8); display: flex; justify-content: space-around; }

/* Sidebar History */
#sidebar { width: 320px; background: var(--sidebar-bg); border-radius: 4px; display: flex; flex-direction: column; border: 1px solid var(--border-color); }
#notation-grid { display: grid; grid-template-columns: 45px 1fr 1fr; font-size: 0.9rem; max-height: 520px; overflow-y: auto; }
.grid-header { padding: 12px; color: #7d7a77; border-bottom: 1px solid var(--border-color); font-weight: bold; background: #2b2925; }
.move-num { padding: 10px; background: #21201d; color: #7d7a77; text-align: center; border-bottom: 1px solid var(--border-color); }
.move-cell { padding: 10px; border-bottom: 1px solid var(--border-color); color: #fff; background: #262421; }

/* Privacy Masking */
.private { display: none; }
.mask { color: #555; font-style: italic; }
body[data-turn="white"] .white-private { display: inline; }
body[data-turn="white"] .white-mask { display: none; }
body[data-turn="black"] .black-private { display: inline; }
body[data-turn="black"] .black-mask { display: none; }

#reset-btn { margin: 15px; padding: 12px; background: #312e2b; color: white; border: none; cursor: pointer; font-weight: bold; }